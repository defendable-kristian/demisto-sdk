name: 'Setup testing environment for demisto-sdk jobs'
description: 'Setup testing environment for demisto-sdk jobs - that includes adding python/create-artifacts/install dependencies'
author: 'Demisto-SDK'

inputs:
  python-version:
    required: true
    type: string
    description: "The python version to setup"
  working-dir:
    required: false
    type: string
    default: ${{ github.workspace }}
    description: "On which working directory to run the setup-env, for example it can be done in content"

runs:
  using: 'composite'
  steps:
  - name: Install the latest version of uv
    uses: eifinger/setup-uv@v1
    with:
      enable-cache: true
      # github-token: ${{ secrets.GITHUB_TOKEN }} # TODO consider using


  - run: uv install --python ${{ inputs.python-version }} -r pyproject.toml --all-extras
    shell: bash